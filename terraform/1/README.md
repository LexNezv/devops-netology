
## –ó–∞–¥–∞–Ω–∏–µ 1
- –ü—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –≤—ã–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥—ã ```terraform --version```.
![image](https://github.com/LexNezv/devops-netology/assets/60059176/11fa9839-ab92-47b1-b678-eb83bee8b5e8)
- –í –∫–∞–∫–æ–º terraform-—Ñ–∞–π–ª–µ, —Å–æ–≥–ª–∞—Å–Ω–æ —ç—Ç–æ–º—É .gitignore, –¥–æ–ø—É—Å—Ç–∏–º–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–∏—á–Ω—É—é, —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é?
  - –≤ —Ñ–∞–π–ª–µ personal.auto.tfvars
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞. –ù–∞–π–¥–∏—Ç–µ –≤ state-—Ñ–∞–π–ª–µ —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ random_password, –ø—Ä–∏—à–ª–∏—Ç–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –∏ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ.
  - –æ—Ç–≤–µ—Ç ```"result": "puQivkOIkBmxk7Vt"```
- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –±–ª–æ–∫ –∫–æ–¥–∞, –ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–π –Ω–∞ —Å—Ç—Ä–æ—á–∫–∞—Ö 29‚Äì42 —Ñ–∞–π–ª–∞ main.tf. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É terraform validate. –û–±—ä—è—Å–Ω–∏—Ç–µ, –≤ —á—ë–º –∑–∞–∫–ª—é—á–∞—é—Ç—Å—è –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –¥–æ–ø—É—â–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –∏—Ö.
  - –≤ 24 —Å—Ç—Ä–æ—á–∫–µ –º—ã –Ω–µ –¥–∞–ª–∏ –∏–º—è, —Ç–æ–ª—å–∫–æ —Ç–∏–ø
  - –≤ 29 —Å–∫—Ä–æ—á–∫–µ –Ω–µ–ª—å–∑—è –¥–∞–≤–∞—Ç—å –∏–º—è, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ü–∏—Ñ—Ä—ã
  - –≤ 31 —Å—Ç—Ä–æ–∫–µ –∏–¥–µ—Ç —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–π –≤ —Ä—É—Ç –º–æ–¥—É–ª–µ —Ä–µ—Å—É—Ä—Å + –æ—à–∏–±–∫–∞ —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤–æ–π –≤ —Å–ª–æ–≤–µ result (–Ω–µ–≤–µ—Ä–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç)
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥. –í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ –∏ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã docker ps
```
resource "random_password" "random_string" {
  length      = 16
  special     = false
  min_upper   = 1
  min_lower   = 1
  min_numeric = 1
}


resource "docker_image" "nginx" {
  name         = "nginx:latest"
  keep_locally = true
}

resource "docker_container" "nginx" {
  image = docker_image.nginx.image_id
  name  = "example_${random_password.random_string.result}"

  ports {
    internal = 80
    external = 8000
  }
}
```
```
docker ps
CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS                  NAMES
a7a918ca2851   a6bd71f48f68   "/docker-entrypoint.‚Ä¶"   27 seconds ago   Up 26 seconds   0.0.0.0:8000->80/tcp   example_puQivkOIkBmxk7Vt
```
- –ó–∞–º–µ–Ω–∏—Ç–µ –∏–º—è docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –±–ª–æ–∫–µ –∫–æ–¥–∞ –Ω–∞ ```hello_world```. –ù–µ –ø–µ—Ä–µ–ø—É—Ç–∞–π—Ç–µ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –∏–º—è –æ–±—Ä–∞–∑–∞. –ú—ã –≤—Å—ë –µ—â—ë –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å name = "nginx:latest". –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É ```terraform apply -auto-approve```. –û–±—ä—è—Å–Ω–∏—Ç–µ —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –≤ —á—ë–º –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–ª—é—á–∞  ```-auto-approve```. –î–æ–≥–∞–¥–∞–π—Ç–µ—Å—å –∏–ª–∏ –Ω–∞–≥—É–≥–ª–∏—Ç–µ –∑–∞—á–µ–º –º–æ–∂–µ—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–π –∫–ª—é—á? –í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã ```docker ps```
  - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã terraform apply -auto-approve –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–∞—Å–Ω—ã–º, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –±–µ–∑ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏.
  - –ü–æ–ª–µ–∑–Ω—ã–º –º–æ–∂–µ—Ç –±—ã—Ç—å, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å –∞–≤—Ç–æ–º–∞—Ç–∏–∫—É. –ù–∞–ø—Ä–∏–º–µ—Ä —á—Ç–æ–±—ã –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–ª gitlab ci, –ø–æ—Å–ª–µ –ø—É—à–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
```
docker ps
CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS                  NAMES
b0439aef5f29   a6bd71f48f68   "/docker-entrypoint.‚Ä¶"   6 seconds ago   Up 5 seconds   0.0.0.0:8000->80/tcp   hello_world
```
- –£–Ω–∏—á—Ç–æ–∂—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã —Å –ø–æ–º–æ—â—å—é **terraform**. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã —É–¥–∞–ª–µ–Ω—ã. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ **terraform.tfstate**.
```
{
  "version": 4,
  "terraform_version": "1.6.5",
  "serial": 11,
  "lineage": "b9e1a454-2112-8c7c-6770-7b9a48401774",
  "outputs": {},
  "resources": [],
  "check_results": null
}
```
- –û–±—ä—è—Å–Ω–∏—Ç–µ, –ø–æ—á–µ–º—É –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –±—ã–ª —É–¥–∞–ª—ë–Ω docker-–æ–±—Ä–∞–∑ **nginx:latest**. –û—Ç–≤–µ—Ç **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –ø–æ–¥–∫—Ä–µ–ø–∏—Ç–µ —Å—Ç—Ä–æ—á–∫–æ–π –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ [**terraform –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ docker**](https://docs.comcloud.xyz/providers/kreuzwerker/docker/latest/docs).  (–∏—â–∏—Ç–µ –≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–µ resource docker_image )
  - –ü–æ—Ç–æ–º—É —á—Ç–æ –º—ã —É–∫–∞–∑–∞–ª–∏, —á—Ç–æ –µ–≥–æ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å –ø–æ–º–æ—â—å—é keep_locally.
```
keep_locally (Boolean) If true, then the Docker image won't be deleted on destroy operation. If this is false, it will delete the image from the docker local storage destroy operation.
```

### –ó–∞–¥–∞–Ω–∏–µ 2*

1. –ò–∑—É—á–∏—Ç–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ provider [**Virtualbox**](https://docs.comcloud.xyz/providers/shekeriev/virtualbox/latest/docs) –æ—Ç
shekeriev.
2. –°–æ–∑–¥–∞–π—Ç–µ —Å –µ–≥–æ –ø–æ–º–æ—â—å—é –ª—é–±—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É. –ß—Ç–æ–±—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VPN, —Å–æ–≤–µ—Ç—É–µ–º –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–π –æ–±—Ä–∞–∑ —Å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º –≤ GitHub –∏–∑ [**—Å–ø–∏—Å–∫–∞**](https://www.vagrantbox.es/).

–í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ plan –¥–ª—è —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ –∏ —Å–∫—Ä–∏–Ω—à–æ—Ç —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –≤ VB —Ä–µ—Å—É—Ä—Å–∞.

```
Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m

Terraform will perform the following actions:

[1m  # virtualbox_vm.vm1[0m will be created
[0m  [32m+[0m[0m resource "virtualbox_vm" "vm1" {
      [32m+[0m[0m cpus   = 1
      [32m+[0m[0m id     = (known after apply)
      [32m+[0m[0m image  = "https://app.vagrantup.com/shekeriev/boxes/debian-11/versions/0.2/providers/virtualbox.box"
      [32m+[0m[0m memory = "512 mib"
      [32m+[0m[0m name   = "debian-11"
      [32m+[0m[0m status = "running"

      [32m+[0m[0m network_adapter {
          [32m+[0m[0m device                 = "IntelPro1000MTDesktop"
          [32m+[0m[0m host_interface         = "vboxnet1"
          [32m+[0m[0m ipv4_address           = (known after apply)
          [32m+[0m[0m ipv4_address_available = (known after apply)
          [32m+[0m[0m mac_address            = (known after apply)
          [32m+[0m[0m status                 = (known after apply)
          [32m+[0m[0m type                   = "hostonly"
        }
    }

[1mPlan:[0m 1 to add, 0 to change, 0 to destroy.
[0m
Changes to Outputs:
  [32m+[0m[0m IPAddress = (known after apply)
[90m
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ[0m

Note: You didn't use the -out option to save this plan, so Terraform can't
guarantee to take exactly these actions if you run "terraform apply" now.
```